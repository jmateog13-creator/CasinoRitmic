<!DOCTYPE html>
<html lang="ca">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MenÃº - Casino RÃ­tmic</title>
    <style>
        :root {
            --felt-green: #2d5a27;
            --felt-dark: #1a3c1a;
            --wood-border: #5d4037;
            --gold: #ffd700;
            --text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
        }

        body {
            margin: 0;
            padding: 0;
            background-color: #111;
            font-family: 'Georgia', serif;
            overflow: hidden;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            user-select: none;
        }

        #menu-container {
            width: 95vw;
            height: 90vh;
            background: radial-gradient(circle at center, var(--felt-green), var(--felt-dark));
            border: 20px solid var(--wood-border);
            border-radius: 50px;
            box-shadow: inset 0 0 50px rgba(0, 0, 0, 0.8), 0 0 20px rgba(0, 0, 0, 0.5);
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 40px;
            box-sizing: border-box;
        }

        /* Texture overlay */
        #menu-container::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100' height='100' filter='url(%23noise)' opacity='0.05'/%3E%3C/svg%3E");
            pointer-events: none;
            border-radius: 30px;
        }

        h1 {
            color: #ffd700;
            font-size: 3em;
            margin-top: 20px;
            margin-bottom: 40px;
            text-shadow: 2px 2px 4px black;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .game-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            max-width: 1200px;
            width: 100%;
            overflow-y: auto;
            flex: 1;
            /* Fill remaining space */
            padding: 20px;
            /* Padding for scrollbar space */
            box-sizing: border-box;
            /* Hide scrollbar for cleaner look but allow scroll */
            scrollbar-width: thin;
            scrollbar-color: var(--gold) var(--felt-dark);
        }

        /* Custom Scrollbar */
        .game-grid::-webkit-scrollbar {
            width: 10px;
        }

        .game-grid::-webkit-scrollbar-track {
            background: var(--felt-dark);
            border-radius: 5px;
        }

        .game-grid::-webkit-scrollbar-thumb {
            background: var(--gold);
            border-radius: 5px;
        }

        .game-card {
            background: #0f1f15;
            border: 1px solid #333;
            border-radius: 15px;
            padding: 30px 20px;
            text-align: center;
            text-decoration: none;
            color: #ffd700;
            transition: transform 0.2s, box-shadow 0.2s, border-color 0.2s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 180px;
        }

        .game-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);
            border-color: #ffd700;
        }

        .game-icon {
            font-size: 3em;
            margin-bottom: 15px;
        }

        .game-title {
            font-size: 1.2em;
            font-weight: bold;
        }

        /* Gold Border for Completed Games */
        .game-card.completed {
            border: 3px solid #ffd700;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
            background: linear-gradient(145deg, #0f1f15, #1a3c1a);
        }

        .game-card.completed .game-title::after {
            content: " ğŸ‘‘";
        }

        .btn-back {
            margin-top: 50px;
            padding: 10px 30px;
            background: transparent;
            border: 2px solid #fff;
            color: #fff;
            border-radius: 30px;
            text-decoration: none;
            font-size: 1.1em;
            transition: all 0.2s;
        }

        .back-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        /* Menu Buttons */
        .menu-controls {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }

        .menu-btn {
            background: linear-gradient(to bottom, var(--gold), #b8860b);
            border: 2px solid #fff;
            padding: 10px 30px;
            font-size: 1.2rem;
            font-weight: bold;
            color: #1a0505;
            border-radius: 30px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            transition: transform 0.1s;
            font-family: 'Georgia', serif;
            text-transform: uppercase;
        }

        .menu-btn:active {
            transform: scale(0.95);
        }

        /* Modals */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-content {
            background: #1a0f0a;
            padding: 40px;
            border: 4px solid var(--gold);
            border-radius: 10px;
            text-align: center;
            max-width: 800px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            color: #fff;
            box-shadow: 0 0 50px var(--gold);
            position: relative;
        }

        .close-modal {
            position: absolute;
            top: 10px;
            right: 20px;
            font-size: 2rem;
            color: var(--gold);
            cursor: pointer;
        }

        .btn-menu:hover {
            background: var(--gold);
            color: #000;
        }

        /* Save Slots */
        .save-slot {
            background: #333;
            border: 2px solid var(--gold);
            padding: 20px;
            margin: 10px 0;
            border-radius: 10px;
            cursor: pointer;
            transition: background 0.2s;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .save-slot:hover {
            background: #444;
        }

        .save-slot.empty {
            border-style: dashed;
            color: #aaa;
        }

        .slot-info {
            text-align: left;
        }

        .slot-actions {
            display: flex;
            gap: 10px;
        }

        .btn-slot {
            padding: 5px 15px;
            font-size: 0.9rem;
            background: var(--gold);
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }

        .btn-delete {
            background: #ff4444;
            color: white;
        }

        /* Relic Locked State */
        .relic-item.locked {
            opacity: 0.5;
            filter: grayscale(100%);
        }

        .relic-item.locked .relic-icon {
            filter: brightness(0);
        }

        #relics-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            margin-top: 20px;
        }
    </style>

</head>

<body>
    <div id="menu-container">
        <h1>SELECCIÃ“ DE JOC</h1>
        <div class="menu-controls"><button class="menu-btn" onclick="showRewards()">ğŸ† PREMIS</button>
            <div class="menu-btn" onclick="openSaveModal()">
                <div class="icon">ğŸ’¾</div>
                GUARDAR / CARREGAR
            </div>
        </div>
        <div class="game-grid"><a href="blackjack_ritmic.html" class="game-card" id="card-blackjack">
                <div class="icon">ğŸƒ</div>
                <h2>Blackjack RÃ­tmic</h2>
            </a><a href="ruleta.html" class="game-card" id="card-ruleta">
                <div class="icon">ğŸ¡</div>
                <h2>Ruleta Russa</h2>
            </a><a href="triler.html" class="game-card" id="card-triler">
                <div class="icon">ğŸ¥¤</div>
                <h2>El Triler</h2>
            </a><a href="simon.html" class="game-card" id="card-simon">
                <div class="icon">ğŸ¹</div>
                <h2>Simon RÃ­tmic</h2>
            </a><a href="slots.html" class="game-card" id="card-slots">
                <div class="icon">ğŸ°</div>
                <h2>Slots RÃ­tmics</h2>
            </a><a href="memory.html" class="game-card" id="card-memory">
                <div class="icon">ğŸ§ </div>
                <h2>Memory RÃ­tmic</h2>
            </a><a href="texas.html" class="game-card" id="card-texas">
                <div class="icon">ğŸ¤ </div>
                <h2>Texas Hold'em</h2>
            </a><a href="daus.html" class="game-card" id="card-daus">
                <div class="icon">ğŸ²</div>
                <h2>Daus RÃ­tmics</h2>
            </a><a href="bolera.html" class="game-card" id="card-bolera">
                <div class="icon">ğŸ³</div>
                <h2>Bolera RÃ­tmica</h2>
            </a><a href="laberinto.html" class="game-card" id="card-laberinto">
                <div class="icon">ğŸ§©</div>
                <h2>Laberinto RÃ­tmic</h2>
            </a><a href="sudoku.html" class="game-card" id="card-sudoku">
                <div class="icon">ğŸ”¢</div>
                <h2>Sudoku RÃ­tmic</h2>
            </a><a href="bomba.html" class="game-card" id="card-bomba">
                <div class="icon">ğŸ’£</div>
                <h2>La Bomba</h2>
            </a><a href="conecta4.html" class="game-card" id="card-conecta4">
                <div class="icon">ğŸ”´</div>
                <h2>Conecta 4</h2>
            </a><a href="mahjong.html" class="game-card" id="card-mahjong">
                <div class="icon">ğŸ€„</div>
                <h2>Mahjong</h2>
            </a><a href="solitario.html" class="game-card" id="card-solitario">
                <div class="icon">ğŸƒ</div>
                <h2>Solitario</h2>
            </a><a href="cajaderitmos.html" class="game-card" id="card-cajaderitmos">
                <div class="icon">ğŸ¥</div>
                <h2>Caixa de Ritmes</h2>
            </a><a href="tetris.html" class="game-card" id="card-tetris">
                <div class="icon">ğŸ§±</div>
                <h2>Tetris RÃ­tmic</h2>
            </a><a href="rodafortuna.html" class="game-card" id="card-roda">
                <div class="icon">ğŸ¡</div>
                <h2>Roda del Risc</h2>
            </a><a href="jokerwild.html" class="game-card" id="card-joker">
                <div class="icon">ğŸƒ</div>
                <h2>Joker Wild</h2>
            </a><a href="dauspirata.html" class="game-card" id="card-dauspirata">
                <div class="icon">ğŸ´â€â˜ ï¸</div>
                <h2>Daus Pirata</h2>
            </a><a href="subasta.html" class="game-card" id="card-subasta">
                <div class="icon">ğŸ”¨</div>
                <h2>La Subasta</h2>
            </a><a href="prestamista.html" class="game-card" id="card-prestamista">
                <div class="icon">âš–ï¸</div>
                <h2>El Prestamista</h2>
            </a><a href="ginrumy.html" class="game-card" id="card-ginrumy">
                <div class="icon">ğŸƒ</div>
                <h2>Gin Rummy</h2>
            </a><a href="polsintern.html" class="game-card" id="card-pols">
                <div class="icon">ğŸ’“</div>
                <h2>Pols Intern</h2>
            </a><a href="craps.html" class="game-card" id="card-craps">
                <div class="icon">ğŸ²</div>
                <h2>Craps</h2>
            </a><a href="cascada.html" class="game-card" id="card-cascada">
                <div class="icon">ğŸª™</div>
                <h2>La Cascada</h2>
            </a><a href="gancho.html" class="game-card" id="card-gancho">
                <div class="icon">ğŸ—ï¸</div>
                <h2>El Ganxo</h2>
            </a><a href="keno.html" class="game-card" id="card-keno">
                <div class="icon">ğŸ«</div>
                <h2>Keno</h2>
            </a><a href="dardos.html" class="game-card" id="card-dardos">
                <div class="icon">ğŸ¯</div>
                <h2>Dards</h2>
            </a><a href="derby.html" class="game-card" id="card-derby">
                <div class="icon">ğŸ‡</div>
                <h2>Derby</h2>
            </a><a href="galeriatir.html" class="game-card" id="card-galeria">
                <div class="icon">ğŸ”«</div>
                <h2>Galeria de Tir</h2>
            </a><a href="cabinavent.html" class="game-card" id="card-cabina">
                <div class="icon">ğŸ’¨</div>
                <h2>Cabina de Vent</h2>
            </a><a href="batalla.html" class="game-card" id="card-batalla">
                <div class="icon">ğŸ»</div>
                <h2>Batalla de Viena</h2>
            </a><a href="escoba.html" class="game-card" id="card-escoba">
                <div class="icon">ğŸ§¹</div>
                <h2>L'Escoba RÃ­tmica</h2>
            </a><a href="intervalritmic.html" class="game-card" id="card-interval">
                <div class="icon">ğŸ“</div>
                <h2>Red Dog RÃ­tmic</h2>
            </a><a href="speed.html" class="game-card" id="card-speed">
                <div class="icon">âš¡</div>
                <h2>Speed RÃ­tmic</h2>
            </a><a href="2048.html" class="game-card" id="card-2048">
                <div class="icon">ğŸ¼</div>
                <h2>2048 RÃ­tmic</h2>
            </a><a href="pig.html" class="game-card" id="card-pig">
                <div class="icon">ğŸ–</div>
                <h2>L'AvarÃ­cia</h2>
            </a><a href="topos.html" class="game-card" id="card-topos">
                <div class="icon">ğŸ”¨</div>
                <h2>El Martell</h2>
            </a><a href="burro.html" class="game-card" id="card-burro">
                <div class="game-icon">ğŸ«</div>
                <div class="game-title">El Burro RÃ­tmic</div>
            </a><a href="paigow.html" class="game-card" id="card-paigow">
                <div class="game-icon">ğŸ€„</div>
                <div class="game-title">Pai Gow RÃ­tmic</div>
            </a><a href="setimig.html" class="game-card" id="card-setimig">
                <div class="game-icon">âœ’ï¸</div>
                <div class="game-title">Set i Mig RÃ­tmic</div>
            </a><a href="scalextric.html" class="game-card" id="card-scalextric">
                <div class="game-icon">â±ï¸</div>
                <div class="game-title">Scalextric RÃ­tmic</div>
            </a><a href="pescador.html" class="game-card" id="card-pescador">
                <div class="game-icon">ğŸ“œ</div>
                <div class="game-title">Ves a Pescar</div>
            </a><a href="klondike.html" class="game-card" id="card-klondike">
                <div class="game-icon">ğŸ»</div>
                <div class="game-title">Solitari Klondike</div>
            </a><a href="calculogic.html" class="game-card" id="card-calculogic">
                <div class="game-icon">ğŸ”¢</div>
                <div class="game-title">El CÃ lcul LÃ²gic</div>
            </a><a href="domino.html" class="game-card" id="card-domino">
                <div class="game-icon">ğŸ¥</div>
                <div class="game-title">DominÃ³ RÃ­tmic</div>
            </a><a href="risk.html" class="game-card" id="card-risk">
                <div class="game-icon">âš”ï¸</div>
                <div class="game-title">Camp de Batalla</div>
            </a><a href="vals.html" class="game-card" id="card-vals">
                <div class="game-icon">ğŸ’ƒ</div>
                <div class="game-title">Mesa del Vals</div>
            </a><a href="embut.html" class="game-card" id="card-embut">
                <div class="game-icon">â³</div>
                <div class="game-title">Embut Classificador</div>
            </a><a href="millonario.html" class="game-card" id="card-millonario">
                <div class="game-icon">ğŸ’°</div>
                <div class="game-title">Qui Vol Ser Milionari</div>
            </a><a href="clicker.html" class="game-card" id="card-clicker">
                <div class="game-icon">ğŸ‘†</div>
                <div class="game-title">El Clicker del Crupier</div>
            </a><a href="conquian.html" class="game-card" id="card-conquian">
                <div class="game-icon">ğŸƒ</div>
                <div class="game-title">ConquiÃ¡n RÃ­tmic</div>
            </a><a href="backgammon.html" class="game-card" id="card-backgammon">
                <div class="game-icon">ğŸ²</div>
                <div class="game-title">Backgammon RÃ­tmic</div>
            </a><a href="moliritmic.html" class="game-card" id="card-moliritmic">
                <div class="game-icon">â˜¸ï¸</div>
                <div class="game-title">El MolÃ­ RÃ­tmic</div>
            </a><a href="whist.html" class="game-card" id="card-whist">
                <div class="game-icon">â™£ï¸</div>
                <div class="game-title">Whist RÃ­tmic</div>
            </a><a href="rutajerarquica.html" class="game-card" id="card-rutajerarquica">
                <div class="game-icon">ğŸ—ºï¸</div>
                <div class="game-title">La Ruta JerÃ rquica</div>
            </a><a href="cronometreinvers.html" class="game-card" id="card-cronometre">
                <div class="game-icon">â±ï¸</div>
                <div class="game-title">El CronÃ²metre Invers</div>
            </a><a href="enceuat.html" class="game-card" id="card-enceuat">
                <div class="game-icon">ğŸ“</div>
                <div class="game-title">Crucigrama RÃ­tmic</div>
            </a><a href="sopadelletres.html" class="game-card" id="card-sopadelletres">
                <div class="game-icon">ğŸ” </div>
                <div class="game-title">Sopa de Lletres</div>
            </a><a href="algebraritmica.html" class="game-card" id="card-algebra">
                <div class="game-icon">â•</div>
                <div class="game-title">Ã€lgebra RÃ­tmica</div>
            </a><a href="pesca.html" class="game-card" id="card-pesca">
                <div class="game-icon">ğŸ£</div>
                <div class="game-title">La Pesca RÃ­tmica</div>
            </a><a href="escalada.html" class="game-card" id="card-escalada">
                <div class="game-icon">ğŸ§—</div>
                <div class="game-title">L'Escalada d' Intervals</div>
            </a></div>
        <audio id="bg-music" src="music/background_music_main.mp3" loop></audio>
        < !-- Rewards Modal -->
            <div id="rewards-modal" class="modal">
                <div class="modal-content"><span class="close-modal"
                        onclick="document.getElementById('rewards-modal').style.display='none'">&times;
                    </span>
                    <h2 style="color: var(--gold); font-size: 2rem; margin-bottom: 10px;">SALA DE TROFEUS</h2>
                    <p>Les relÃ­quies musicals que has recuperat.</p>
                    <div id="relics-grid">
                        < !-- Populated by JS -->
                    </div>
                </div>
            </div>
            <!-- Save/Load Modal -->
            <div id="save-modal" class="modal">
                <div class="modal-content" style="max-width: 500px;">
                    <span class="close-modal"
                        onclick="document.getElementById('save-modal').style.display='none'">Ã—</span>
                    <h2 style="color: var(--gold);">PARTIDES GUARDADES</h2>
                    <div id="save-slots-container">
                        <!-- Slots generated by JS -->
                    </div>
                    <button class="menu-btn" style="margin-top:20px; background: #ff4444; color: white; border:none;"
                        onclick="startNewGame()">NOVA PARTIDA (RESET)</button>
                </div>
            </div>
            <script> // Check Rewards
                const rewards = JSON.parse(sessionStorage.getItem('casinoRewards') || '{}');

                // Map game IDs to their reward keys AND Relic Data
                const gameMap = {
                    'card-blackjack': {
                        key: 'reward_blackjack', icon: 'ğŸƒ', name: "L'As de Beethoven"
                    }

                    ,
                    'card-ruleta': {
                        key: 'reward_ruleta', icon: 'ğŸ¡', name: "La Roda de Rossini"
                    }

                    ,
                    'card-triler': {
                        key: 'reward_triler', icon: 'ğŸ«£', name: "L'Ull de Mozart"
                    }

                    ,
                    'card-simon': {
                        key: 'reward_simon', icon: 'ğŸ¹', name: "La MemÃ²ria de Bach"
                    }

                    ,
                    'card-slots': {
                        key: 'reward_slots', icon: 'ğŸ°', name: "La Fortuna de Vivaldi"
                    }

                    ,
                    'card-memory': {
                        key: 'reward_memory', icon: 'ğŸ§ ', name: "El Cervell de Chopin"
                    }

                    ,
                    'card-texas': {
                        key: 'reward_texas', icon: 'ğŸ¤ ', name: "El Barret de Copland"
                    }

                    ,
                    'card-daus': {
                        key: 'reward_daus', icon: 'ğŸ²', name: "Els Daus de Haydn"
                    }

                    ,
                    'card-bolera': {
                        key: 'reward_bolera', icon: 'ğŸ³', name: "La Bola de Boulez"
                    }

                    ,
                    'card-laberinto': {
                        key: 'reward_laberinto', icon: 'ğŸ§©', name: "El Fil d'Ariadna"
                    }

                    ,
                    'card-sudoku': {
                        key: 'reward_sudoku', icon: 'ğŸ”¢', name: "La QuadrÃ­cula de Glass"
                    }

                    ,
                    'card-bomba': {
                        key: 'reward_bomba', icon: 'ğŸ’£', name: "El MetrÃ²nom Explosiu"
                    }

                    ,
                    'card-conecta4': {
                        key: 'reward_conecta4', icon: 'ğŸ”´', name: "La ConnexiÃ³ de Cage"
                    }

                    ,
                    'card-mahjong': {
                        key: 'reward_mahjong', icon: 'ğŸ€„', name: "La PeÃ§a de Puccini"
                    }

                    ,
                    'card-solitario': {
                        key: 'reward_solitario', icon: 'ğŸƒ', name: "La PaciÃ¨ncia de Satie"
                    }

                    ,
                    'card-cajaderitmos': {
                        key: 'reward_cajaderitmos', icon: 'ğŸ¥', name: "El Ritme de Stravinsky"
                    }

                    ,
                    'card-tetris': {
                        key: 'reward_tetris', icon: 'ğŸ§±', name: "El Mur de Pink Floyd"
                    }

                    ,
                    'card-roda': {
                        key: 'reward_roda', icon: 'ğŸ¡', name: "La Fortuna de Orff"
                    }

                    ,
                    'card-joker': {
                        key: 'reward_joker', icon: 'ğŸƒ', name: "El ComodÃ­ de Joplin"
                    }

                    ,
                    'card-dauspirata': {
                        key: 'reward_dauspirata', icon: 'ğŸ´â€â˜ ï¸', name: "El Tresor de Wagner"
                    }

                    ,
                    'card-subasta': {
                        key: 'reward_subasta', icon: 'ğŸ”¨', name: "El Martell de Mahler"
                    }

                    ,
                    'card-prestamista': {
                        key: 'reward_prestamista', icon: 'ğŸ’¸', name: "L'Or de Verdi"
                    }

                    ,
                    'card-ginrumy': {
                        key: 'reward_ginrumy', icon: 'ğŸ¸', name: "La Copa de Strauss"
                    }

                    ,
                    'card-pols': {
                        key: 'reward_pols', icon: 'ğŸ’ª', name: "La ForÃ§a de Beethoven"
                    }

                    ,
                    'card-craps': {
                        key: 'reward_craps', icon: 'ğŸ²', name: "La Sort de Salieri"
                    }

                    ,
                    'card-cascada': {
                        key: 'reward_cascada', icon: 'ğŸª™', name: "La Moneda de Bizet"
                    }

                    ,
                    'card-gancho': {
                        key: 'reward_gancho', icon: 'ğŸª', name: "El Ganxo de CapitÃ "
                    }

                    ,
                    'card-keno': {
                        key: 'reward_keno', icon: 'ğŸ«', name: "El Bitllet de Gershwin"
                    }

                    ,
                    'card-dardos': {
                        key: 'reward_dardos', icon: 'ğŸ¯', name: "La Diana de Rossini"
                    }

                    ,
                    'card-derby': {
                        key: 'reward_derby', icon: 'ğŸ‡', name: "El Cavall de Walkiria"
                    }

                    ,
                    'card-galeria': {
                        key: 'reward_galeria', icon: 'ğŸ”«', name: "El Tret de Tchaikovsky"
                    }

                    ,
                    'card-cabina': {
                        key: 'reward_cabina', icon: 'ğŸ’¨', name: "El Vent de Debussy"
                    }

                    ,
                    'card-batalla': {
                        key: 'reward_batalla', icon: 'âš”ï¸', name: "L'Espasa de Khachaturian"
                    }

                    ,
                    'card-escoba': {
                        key: 'reward_escoba', icon: 'ğŸ§¹', name: "L'Escoba de Dukas"
                    }

                    ,
                    'card-2048': {
                        key: 'reward_2048', icon: 'ğŸ¼', name: "La Suma de Bach"
                    }

                    ,
                    'card-pig': {
                        key: 'reward_pig', icon: 'ğŸ–', name: "La Guardiola de Prokofiev"
                    }

                    ,
                    'card-topos': {
                        key: 'reward_topos', icon: 'ğŸ”¨', name: "El Martell de Thor"
                    }

                    ,
                    'card-burro': {
                        key: 'reward_burro', icon: 'ğŸ«', name: "La Tossuderia de Schubert"
                    }

                    ,
                    'card-paigow': {
                        key: 'reward_paigow', icon: 'ğŸ€„', name: "El Drac de Puccini"
                    }

                    ,
                    'card-setimig': {
                        key: 'reward_setimig', icon: 'âœ’ï¸', name: "La Ploma de Cervantes"
                    }

                    ,
                    'card-scalextric': {
                        key: 'reward_scalextric', icon: 'ğŸï¸', name: "El Motor de Adams"
                    }

                    ,
                    'card-pescador': {
                        key: 'reward_pescador', icon: 'ğŸ£', name: "La Canya de Britten"
                    }

                    ,
                    'card-klondike': {
                        key: 'reward_klondike', icon: 'ğŸ»', name: "El ViolÃ­ de Paganini"
                    }

                    ,
                    'card-calculogic': {
                        key: 'reward_calculogic', icon: 'ğŸ”¢', name: "El Nombre de Pythagoras"
                    }

                    ,
                    'card-domino': {
                        key: 'reward_domino', icon: 'ğŸ¹', name: "La Fitxa de Ravel"
                    }

                    ,
                    'card-risk': {
                        key: 'reward_risk', icon: 'ğŸŒ', name: "El MÃ³n de Dvorak"
                    }

                    ,
                    'card-vals': {
                        key: 'reward_vals', icon: 'ğŸ’ƒ', name: "El Vestit de Strauss"
                    }

                    ,
                    'card-embut': {
                        key: 'reward_embut', icon: 'â³', name: "El Temps de Zimmer"
                    }

                    ,
                    'card-millonario': {
                        key: 'reward_millonario', icon: 'ğŸ’°', name: "El Xec de Williams"
                    }

                    ,
                    'card-clicker': {
                        key: 'reward_clicker', icon: 'ğŸ¹', name: "El Pianoforte de Cristofori"
                    }

                    ,
                    'card-conquian': {
                        key: 'reward_conquian', icon: 'ğŸª„', name: "La Batuta de Berlioz"
                    }

                    ,
                    'card-backgammon': {
                        key: 'reward_backgammon', icon: 'ğŸ“', name: "El Monocordi de PitÃ gores"
                    }

                    ,
                    'card-moliritmic': {
                        key: 'reward_moliritmic', icon: 'â˜¸ï¸', name: "La Placa de Bach"
                    }

                    ,
                    'card-whist': {
                        key: 'reward_whist', icon: 'ğŸ“œ', name: "La Partitura d'Orfeu"
                    }

                    ,
                    'card-rutajerarquica': {
                        key: 'reward_rutajerarquica', icon: 'ğŸ¼', name: "L'Ofrena Musical"
                    }

                    ,
                    'card-cronometre': {
                        key: 'reward_cronometre', icon: 'â±ï¸', name: "El MetrÃ²nom de Maelzel"
                    }

                    ,
                    'card-enceuat': {
                        key: 'reward_enceuat', icon: 'âœ’ï¸', name: "La Ploma de HÃ¤ndel"
                    }

                    ,
                    'card-sopadelletres': {
                        key: 'reward_sopadelletres', icon: 'ğŸ“œ', name: "El Manuscrit de la Fuga"
                    }

                    ,
                    'card-algebra': {
                        key: 'reward_algebra', icon: 'ğŸ“', name: "La Pissarra de Schoenberg"
                    }

                    ,
                    'card-pesca': {
                        key: 'reward_pesca', icon: 'ğŸ£', name: "L'Ham de Schubert"
                    }

                    ,
                    'card-escalada': {
                        key: 'reward_escalada', icon: 'â›ï¸', name: "El Piolet de Strauss"
                    }
                }

                    ;

                for (const [cardId, data] of Object.entries(gameMap)) {
                    if (rewards[data.key]) {
                        document.getElementById(cardId).classList.add('completed');
                    }
                }

                function showRewards() {
                    const modal = document.getElementById('rewards-modal');
                    const grid = document.getElementById('relics-grid');
                    const rewards = JSON.parse(sessionStorage.getItem('casinoRewards') || '{}');

                    grid.innerHTML = '';

                    // Iterate over ALL games in gameMap to show locked/unlocked
                    for (const [key, data] of Object.entries(gameMap)) {
                        const isUnlocked = rewards[data.key];
                        const div = document.createElement('div');
                        div.className = `relic-item ${isUnlocked ? '' : 'locked'}`;

                        div.innerHTML = `
                    <div class="relic-icon">${data.icon}</div>
                    <div class="relic-name">${data.name}</div>
                    ${isUnlocked ? '' : '<div style="font-size:0.8rem; color:#aaa;">(Bloquejat)</div>'}
                `;
                        grid.appendChild(div);
                    }

                    modal.style.display = 'flex';
                }

                function openSaveModal() {
                    renderSaveSlots();
                    document.getElementById('save-modal').style.display = 'flex';
                }

                function renderSaveSlots() {
                    const container = document.getElementById('save-slots-container');
                    container.innerHTML = '';

                    const slots = JSON.parse(localStorage.getItem('casinoSaveSlots') || '[null, null, null]');

                    slots.forEach((slot, index) => {
                        const div = document.createElement('div');
                        div.className = `save-slot ${slot ? '' : 'empty'}`;

                        if (slot) {
                            div.innerHTML = `
                        <div class="slot-info">
                            <div style="color:var(--gold); font-weight:bold;">${slot.name}</div>
                            <div style="font-size:0.8rem; color:#aaa;">${slot.date}</div>
                            <div style="font-size:0.8rem;">RelÃ­quies: ${Object.keys(slot.rewards).length}</div>
                        </div>
                        <div class="slot-actions">
                            <button class="btn-slot" onclick="loadGame(${index})">CARREGAR</button>
                            <button class="btn-slot" onclick="saveGame(${index})">SOBREESCRIURE</button>
                            <button class="btn-slot btn-delete" onclick="deleteSlot(${index})">X</button>
                        </div>
                    `;
                        } else {
                            div.innerHTML = `
                        <div class="slot-info">BUIT</div>
                        <div class="slot-actions">
                            <button class="btn-slot" onclick="saveGame(${index})">GUARDAR AQUÃ</button>
                        </div>
                    `;
                        }
                        container.appendChild(div);
                    });
                }

                function saveGame(index) {
                    const name = prompt("Nom de la partida:", `Partida ${index + 1}`);
                    if (!name) return;

                    const slots = JSON.parse(localStorage.getItem('casinoSaveSlots') || '[null, null, null]');
                    const currentRewards = JSON.parse(sessionStorage.getItem('casinoRewards') || '{}');

                    slots[index] = {
                        name: name,
                        date: new Date().toLocaleString(),
                        rewards: currentRewards
                    };

                    localStorage.setItem('casinoSaveSlots', JSON.stringify(slots));
                    renderSaveSlots();
                }

                function loadGame(index) {
                    const slots = JSON.parse(localStorage.getItem('casinoSaveSlots') || '[null, null, null]');
                    if (slots[index]) {
                        if (confirm(`Carregar partida "${slots[index].name}"? Es perdrÃ  el progrÃ©s no guardat.`)) {
                            sessionStorage.setItem('casinoRewards', JSON.stringify(slots[index].rewards));
                            alert("Partida carregada!");
                            location.reload();
                        }
                    }
                }

                function deleteSlot(index) {
                    if (confirm("Segur que vols esborrar aquest slot?")) {
                        const slots = JSON.parse(localStorage.getItem('casinoSaveSlots') || '[null, null, null]');
                        slots[index] = null;
                        localStorage.setItem('casinoSaveSlots', JSON.stringify(slots));
                        renderSaveSlots();
                    }
                }

                function startNewGame() {
                    if (confirm("ComenÃ§ar nova partida? Es reiniciarÃ  tot el progrÃ©s actual.")) {
                        sessionStorage.removeItem('casinoRewards');
                        location.reload();
                    }
                }
                const audio = document.getElementById('bg-music');
                audio.volume = 0.5;

                document.body.addEventListener('click', () => {
                    if (audio.paused) audio.play();
                }

                    , {
                        once: true
                    });

                // Try playing immediately
                audio.play().catch(() => {
                    console.log("Autoplay blocked - waiting for interaction");
                });

            </script>
</body>

</html>